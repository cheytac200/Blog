(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,,,function(t,e,n){},,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(2),c=n.n(r),a=n(10),s=n.n(a),o=(n(15),n(7)),u=n(9),i=n(1),p=n.n(i),b=n(3),l=n(4),j=(n(17),n(18),n(0)),d=function(t){var e=t.loading,n=t.posts,r=t.onSelectPost,c=t.onDelete,a=t.onEditPost;return Object(j.jsxs)("div",{className:"PostList",children:[Object(j.jsx)("h2",{children:"Posts:"}),e?Object(j.jsx)("p",{children:"Loading data..."}):Object(j.jsx)(j.Fragment,{children:n.map((function(t){return Object(j.jsx)("ul",{className:"PostList__list",children:Object(j.jsxs)("li",{className:"PostList__item",children:[Object(j.jsx)("h3",{children:t.title}),Object(j.jsx)("p",{children:t.body}),Object(j.jsxs)("div",{className:"PostList__buttons",children:[Object(j.jsx)("button",{type:"button",className:"PostList__button",onClick:r.bind("",t),children:"Post details"}),Object(j.jsx)("button",{type:"button",className:"PostList__button",onClick:a.bind("",t),children:"Edit"}),Object(j.jsx)("button",{type:"button",className:"PostList__button",onClick:c.bind("",t.id),children:"Delete"})]})]})},t.id)}))})]})},f=(n(20),function(t){var e=t.onSubmit,n=t.editablePost,c=Object(r.useState)(""),a=Object(l.a)(c,2),s=a[0],o=a[1],u=Object(r.useState)(""),i=Object(l.a)(u,2),p=i[0],b=i[1],d=Object(r.useState)(!1),f=Object(l.a)(d,2),h=f[0],x=f[1],m=function(){o(""),b("")};return Object(r.useEffect)((function(){x(0!==Object.keys(n).length),h?(o(n.title),b(n.body)):m()}),[n,h]),Object(j.jsxs)("div",{className:"NewPost",children:[Object(j.jsx)("input",{className:"NewPost__inp title",type:"text",placeholder:"Enter a title",value:s||"",required:!0,onChange:function(t){return o(t.target.value)}}),Object(j.jsx)("textarea",{className:"NewPost__inp body",type:"text",placeholder:"Enter a text",value:p||"",required:!0,onChange:function(t){return b(t.target.value)}}),Object(j.jsx)("button",{type:"button",onClick:function(t){t.preventDefault(),(s||p)&&(e({title:s,body:p}),m())},className:"NewPost__button",children:h?"Edit current post":"Add new post"})]})}),h=function(t){var e=t.currentPost;return Object(j.jsxs)("div",{className:"postDetail",children:[Object(j.jsx)("h2",{children:"Post Detail"}),Object(j.jsx)("h3",{children:e.title}),Object(j.jsx)("p",{children:e.body})]})},x=function(){var t=Object(r.useState)(!1),e=Object(l.a)(t,2),n=e[0],c=e[1];return{loading:n,request:function(){var t=Object(b.a)(p.a.mark((function t(e){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,fetch(e);case 4:return n=t.sent,t.next=7,n.json();case 7:return r=t.sent,c(!1),t.abrupt("return",r);case 12:throw t.prev=12,t.t0=t.catch(0),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),post:function(){var t=Object(b.a)(p.a.mark((function t(e,r){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=12;break}return c(!0),t.next=5,fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});case 5:return a=t.sent,c(!1),t.next=9,a.json();case 9:return s=t.sent,c(!1),t.abrupt("return",s);case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),new Error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}(),del:function(){var t=Object(b.a)(p.a.mark((function t(e,r){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=11;break}return c(!0),t.next=5,fetch("".concat(e,"/").concat(r),{method:"DELETE"});case 5:return a=t.sent,t.next=8,a.json();case 8:return s=t.sent,c(!1),t.abrupt("return",s);case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(0),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}(),put:function(){var t=Object(b.a)(p.a.mark((function t(e,r,a){var s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=11;break}return c(!0),t.next=5,fetch("".concat(e,"/").concat(r),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)});case 5:return s=t.sent,t.next=8,s.json();case 8:return o=t.sent,c(!1),t.abrupt("return",o);case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(0),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()}},m=function(t){var e=t.comments,n=t.loading;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Comments:"}),n?"Loading comments...":e&&e.map((function(t){return Object(j.jsx)("p",{children:t.body},t.id)}))]})},O=(n(21),function(t){var e=t.onSubmit,n=Object(r.useRef)();return Object(j.jsxs)("div",{className:"newComment",children:[Object(j.jsx)("textarea",{type:"text",placeholder:"Enter new comment...",ref:n,className:"newComment__text"}),Object(j.jsx)("button",{type:"button",onClick:function(){n.current.value&&(e(n.current.value),n.current.value="")},className:"newComment__btn",children:"Add comment"})]})}),v=function(t){var e=t.currentPost,n=Object(r.useState)([]),c=Object(l.a)(n,2),a=c[0],s=c[1],u=x(),i=u.post,d=u.request,f=u.loading,v=function(){var t=Object(b.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d("https://bloggy-api.herokuapp.com/posts/".concat(e.id,"?_embed=comments"));case 2:(n=t.sent)&&s(n.comments);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(b.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i("https://bloggy-api.herokuapp.com/comments",{postId:e.id,body:n});case 2:r=t.sent,s((function(t){return[r].concat(Object(o.a)(t))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().then()}),[e]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(h,{currentPost:e}),Object(j.jsx)(m,{comments:a,loading:f}),Object(j.jsx)(O,{onSubmit:y})]})};var y=function(){var t=Object(r.useState)([]),e=Object(l.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)({}),s=Object(l.a)(a,2),i=s[0],h=s[1],m=Object(r.useState)({}),O=Object(l.a)(m,2),y=O[0],w=O[1],g=x(),k=g.post,_=g.request,P=g.loading,N=g.del,S=g.put,E=function(){var t=Object(b.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("https://bloggy-api.herokuapp.com/posts");case 2:e=t.sent,c(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(b.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===Object.keys(y).length){t.next=7;break}return t.next=3,S("https://bloggy-api.herokuapp.com/posts",y.id,e);case 3:c((function(t){return t.map((function(t){return t.id===y.id?Object(u.a)(Object(u.a)({},t),e):t}))})),w({}),t.next=11;break;case 7:return t.next=9,k("https://bloggy-api.herokuapp.com/posts",e);case 9:n=t.sent,c((function(t){return[n].concat(Object(o.a)(t))}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(b.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u043e\u0441\u0442?")){t.next=6;break}return t.next=4,N("https://bloggy-api.herokuapp.com/posts",e);case 4:return t.next=6,E();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().then()}),[]),Object(j.jsxs)("main",{className:"App__main",children:[Object(j.jsxs)("div",{className:"App__sidebar",children:[Object(j.jsx)(f,{loading:P,onSubmit:C,editablePost:y}),Object(j.jsx)(d,{loading:P,posts:n,onSelectPost:h,onDelete:L,onEditPost:w})]}),Object(j.jsx)("div",{className:"App__content",children:0!==Object.keys(i).length&&Object(j.jsx)(v,{loading:P,currentPost:i})})]})},w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),r(t),c(t),a(t),s(t)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")),w()}],[[22,1,2]]]);
//# sourceMappingURL=main.de160ecd.chunk.js.map